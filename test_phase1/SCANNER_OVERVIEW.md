# Pre-Import File Scanner - Visual Overview

## What It Looks Like

### Main Window Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ G-Code File Scanner - Phase 1 Test               [_][â–¡][X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 1 Test Environment - Pre-Import File Scanner            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€ Select File to Scan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ File: [C:\...\repository\o13002.nc          ] [Browse...] â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚                      [ ğŸ” Scan File ]                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ Results â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [Summary] [Issues Details] [Raw Parse Data]                â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚â”‚
â”‚  â”‚  G-CODE FILE SCAN RESULTS                                  â”‚â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  File: o13002.nc                                           â”‚â”‚
â”‚  â”‚  Path: C:\...\repository\o13002.nc                         â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  âœ“ File parsed successfully                                â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  PROGRAM INFORMATION                                        â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚    Program Number:  o13002                                 â”‚â”‚
â”‚  â”‚    Title:           13.0 142/220MM 2.0 HC .5               â”‚â”‚
â”‚  â”‚    Round Size:      13.0"                                  â”‚â”‚
â”‚  â”‚    Spacer Type:     hub_centric                            â”‚â”‚
â”‚  â”‚    Material:        6061-T6                                â”‚â”‚
â”‚  â”‚    Tools Used:      T101, T121, T202                       â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  DIMENSIONS                                                 â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚    âœ“ Outer Diameter (OD)        13.0                       â”‚â”‚
â”‚  â”‚    âœ“ Thickness                  2.0                        â”‚â”‚
â”‚  â”‚    âœ“ Center Bore (CB)           142                        â”‚â”‚
â”‚  â”‚    âœ“ Hub Diameter (OB)          220                        â”‚â”‚
â”‚  â”‚    âœ“ Hub Height                 0.5                        â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  ISSUES                                                     â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  âš ï¸  WARNINGS (2)                                           â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚    Tool Home Position:                                     â”‚â”‚
â”‚  â”‚      1. Z-13.0 detected (expected Z-10.0 for 13" OD)       â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚    Validation:                                             â”‚â”‚
â”‚  â”‚      1. M09 should come before M05                         â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  [ğŸ“„ View File] [ğŸ’¾ Export Report]                    [âŒ Close]â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Scan complete: 2 warning(s), 0 error(s)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tab Views

### Tab 1: Summary
**Purpose**: Quick overview of scan results

**Shows**:
- âœ… File information
- âœ… Program details (number, title, type, material)
- âœ… Dimensions with status (detected âœ“ or missing -)
- âœ… Issues grouped by category
- âœ… Color-coded (green=success, orange=warning, red=error, blue=info)

**Best for**: Quick scan to see if file is clean

---

### Tab 2: Issues Details
**Purpose**: Organized view of all issues

```
â”Œâ”€ Issues Details Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚  [Tree View with expand/collapse]                        â”‚
â”‚                                                           â”‚
â”‚  â–¼ âš ï¸  WARNING  |  Warnings  |  2 warning(s)             â”‚
â”‚    â–¼ ğŸ“  WARNING  |  Tool Home Position  |  1 warning(s)â”‚
â”‚      â€¢  WARNING  |  Tool Home Position  |  Z-13.0...    â”‚
â”‚    â–¼ ğŸ“  WARNING  |  Validation  |  1 warning(s)        â”‚
â”‚      â€¢  WARNING  |  Validation  |  M09 should come...   â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Shows**:
- Tree structure of issues
- Grouped by type and category
- Can expand/collapse groups
- Full message text

**Best for**: Understanding specific issues and their categories

---

### Tab 3: Raw Parse Data
**Purpose**: Complete parse result for debugging

**Shows**:
- All fields from GCodeParseResult dataclass
- Lists of detected elements
- Tool sequences
- P-codes found
- All metadata
- Raw values (not formatted)

**Best for**: Debugging parser issues, verifying detection accuracy

---

## Color Coding

### Summary Tab Colors

| Color | Meaning | Examples |
|-------|---------|----------|
| **Green** âœ“ | Success/Detected | "âœ“ Outer Diameter: 13.0" |
| **Orange** âš ï¸ | Warning | "âš ï¸ WARNINGS (2)" |
| **Red** âŒ | Error/Critical | "âŒ ERRORS (1)" |
| **Blue** - | Info/Missing | "- Thickness: Not detected" |
| **Bold** | Headers | "PROGRAM INFORMATION" |

---

## Button Functions

### During Scan

| Button | State | Function |
|--------|-------|----------|
| Browse | âœ… Enabled | Opens file browser |
| Scan File | âœ… Enabled | Starts scan |
| View File | âŒ Disabled | (until scan complete) |
| Export Report | âŒ Disabled | (until scan complete) |
| Close | âœ… Enabled | Closes window |

### After Scan

| Button | State | Function |
|--------|-------|----------|
| Browse | âœ… Enabled | Select different file |
| Scan File | âœ… Enabled | Rescan or scan new file |
| View File | âœ… Enabled | Opens file in text editor |
| Export Report | âœ… Enabled | Saves results to .txt |
| Close | âœ… Enabled | Closes window |

---

## Workflow Examples

### Example 1: Clean File (No Issues)
```
1. Browse â†’ Select o10247.nc
2. Scan File
3. Results show:
   âœ“ File parsed successfully
   âœ“ All dimensions detected (green)
   âœ“ No issues found
4. Status: "Scan complete: 0 warning(s), 0 error(s)"
```

### Example 2: File with Warnings
```
1. Browse â†’ Select o13002.nc
2. Scan File
3. Results show:
   âœ“ File parsed successfully
   âœ“ Most dimensions detected
   âš ï¸ WARNINGS (2)
     - Tool home Z-13.0 (should be Z-10.0)
     - M09 should come before M05
4. Status: "Scan complete: 2 warning(s), 0 error(s)"
5. Review warnings in Issues Details tab
6. View File to check specific lines
```

### Example 3: File with Missing Data
```
1. Browse â†’ Select file_no_dimensions.nc
2. Scan File
3. Results show:
   âœ“ File parsed successfully
   âœ“ Program number detected
   - Outer Diameter: Not detected (blue)
   - Thickness: Not detected (blue)
   - Center Bore: Not detected (blue)
4. Status: "Scan complete: 3 warning(s), 0 error(s)"
   (Missing data counts as warnings)
```

### Example 4: Invalid File
```
1. Browse â†’ Select corrupted.nc
2. Scan File
3. Results show:
   âŒ Failed to parse file
   âŒ ERRORS (1)
     - Parse error: [specific error message]
4. Status: "Scan failed - see errors"
5. File cannot be imported until fixed
```

---

## Status Bar Messages

| Message | Meaning |
|---------|---------|
| "Ready to scan" | Initial state, no file scanned yet |
| "Scanning o13002.nc..." | Scan in progress |
| "Scan complete: 2 warning(s), 0 error(s)" | Scan finished successfully |
| "Scan complete: 0 warning(s), 0 error(s)" | Clean file, no issues |
| "Scan failed - see errors" | Parse error or critical failure |

---

## Export Report Format

When you click "ğŸ’¾ Export Report", you get a text file:

```
================================================================================
G-CODE FILE SCAN RESULTS
================================================================================

File: o13002.nc
Path: C:\Users\...\repository\o13002.nc

âœ“ File parsed successfully

PROGRAM INFORMATION
--------------------------------------------------------------------------------
  Program Number:  o13002
  Title:           13.0 142/220MM 2.0 HC .5
  Round Size:      13.0"
  Spacer Type:     hub_centric
  Material:        6061-T6
  Tools Used:      T101, T121, T202

DIMENSIONS
--------------------------------------------------------------------------------
  âœ“ Outer Diameter (OD)        13.0
  âœ“ Thickness                  2.0
  âœ“ Center Bore (CB)           142
  âœ“ Hub Diameter (OB)          220
  âœ“ Hub Height                 0.5

ISSUES
--------------------------------------------------------------------------------

âš ï¸  WARNINGS (2)

  Tool Home Position:
    1. Z-13.0 detected (expected Z-10.0 for 13" OD)

  Validation:
    1. M09 should come before M05


================================================================================
RAW PARSE DATA
================================================================================

[Complete parse result with all fields]
...
```

---

## Quick Reference Card

### Keyboard Shortcuts (Future)
Currently no keyboard shortcuts in test environment.
Will be added during main app integration:
- `Ctrl+O` - Browse for file
- `Ctrl+R` - Scan/Rescan file
- `Ctrl+S` - Export report
- `Ctrl+W` - Close window

### File Types Supported
- `.nc` files (G-code)
- `.txt` files (if they contain G-code)
- Any text file with G-code content

### Scan Speed
- Small files (< 100 lines): < 1 second
- Medium files (100-500 lines): 1-3 seconds
- Large files (500-2000 lines): 3-10 seconds
- Very large files (2000+ lines): 10-30 seconds

---

## Tips for Testing

### What to Test
1. âœ… **Various file types**: Standard, Hub-Centric, STEP, 2PC
2. âœ… **Different sizes**: Small, medium, large files
3. âœ… **Clean files**: Should show no warnings
4. âœ… **Problem files**: Should detect known issues
5. âœ… **Edge cases**: Empty, corrupted, missing data

### How to Verify Accuracy
1. Pick a file you know well
2. Check what issues you know it has
3. Scan with the scanner
4. Verify it detects the known issues
5. Check for false positives (issues that aren't real)

### What to Report
- âœ… Issues detected correctly
- âŒ Issues missed (false negatives)
- âš ï¸ Incorrect warnings (false positives)
- ğŸ’¡ Suggestions for improvements
- ğŸ› Bugs or crashes

---

## Integration Preview

When this feature is integrated into the main application:

### New Menu Item
```
File
  â”œâ”€ Import Single File...
  â”œâ”€ Import Multiple Files...
  â”œâ”€ Batch Import from Folder...
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”œâ”€ ğŸ” Scan G-Code File...        â† NEW!
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”œâ”€ Export...
  â””â”€ Exit
```

### Keyboard Shortcut
`Ctrl+Shift+S` - Scan G-Code File

### Integration Points
1. **Before import**: Optional scan before adding to database
2. **On duplicate**: Automatic scan when duplicating program
3. **Maintenance**: Scan existing files to check for issues
4. **Troubleshooting**: Scan files when debugging problems

---

## Comparison: Test vs. Integrated Version

| Feature | Test Version | Integrated Version |
|---------|--------------|-------------------|
| Window | Standalone | Part of main app |
| Database | Not accessed | Can import after scan |
| Import | Not available | "Import Anyway" button |
| Auto-fix | Not available | Will be available |
| Shortcuts | None | Ctrl+Shift+S |
| Menu access | Run separately | File menu |
| Context menu | No | Right-click file |

---

**Ready to try it? Run `run_test.bat` and start scanning!**

See [QUICK_START.md](QUICK_START.md) for a 5-minute quick start guide.
